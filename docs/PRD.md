# 产品需求文档（PRD）：Markdown 笔记应用

## 1. 产品概述

### 1.1 产品定位

一款轻量级、基于浏览器的 Markdown 笔记应用。用户可以在左侧编辑器中编写 Markdown 内容，右侧实时预览渲染后的效果，实现所见即所得的写作体验。所有数据存储在浏览器 LocalStorage 中，无需后端服务，开箱即用。

### 1.2 目标用户

- 需要快速记录 Markdown 笔记的开发者
- 喜欢轻量级工具、不依赖云服务的个人用户
- 需要在浏览器中临时编写和预览 Markdown 的任何人

### 1.3 核心价值

| 价值点 | 说明 |
|--------|------|
| **即开即用** | 无需注册、无需后端，打开浏览器即可使用 |
| **实时预览** | 左右分栏，编辑与预览同步呈现 |
| **代码友好** | 代码块支持语法高亮，适合技术笔记 |
| **数据自主** | 数据存储在用户本地浏览器，隐私可控 |

---

## 2. 功能需求

### 2.1 笔记管理

#### 2.1.1 创建笔记
- 用户点击「新建笔记」按钮创建新笔记
- 新笔记包含标题（默认「未命名笔记」）和内容（默认空白）
- 创建后自动聚焦到标题输入框

#### 2.1.2 编辑笔记
- **标题编辑**：笔记标题支持直接编辑，实时保存
- **内容编辑**：左侧提供纯文本编辑区域，支持 Markdown 语法输入
- 编辑内容在用户停止输入后自动保存到 LocalStorage（防抖 500ms）

#### 2.1.3 删除笔记
- 每条笔记显示删除按钮
- 删除前弹出确认对话框，避免误操作
- 删除后自动切换到笔记列表中的下一条笔记；若无笔记则显示空状态

#### 2.1.4 笔记列表
- 左侧面板显示全部笔记列表
- 列表项显示笔记标题和更新时间
- 当前选中的笔记高亮显示
- 按最后修改时间倒序排列

### 2.2 搜索功能

- 笔记列表上方提供搜索框
- 支持按标题和内容进行模糊搜索
- 实时过滤列表，输入即搜索
- 无搜索结果时显示「暂无匹配笔记」提示

### 2.3 Markdown 编辑与预览

#### 2.3.1 左右分栏布局
- **左侧**：笔记列表 + Markdown 文本编辑器
- **右侧**：Markdown 实时预览区域
- 左右面板可通过分隔线调整宽度比例（可选功能）

#### 2.3.2 Markdown 渲染
支持常见 Markdown 语法：

| 语法 | 说明 |
|------|------|
| 标题 | `# H1` ~ `###### H6` |
| 加粗/斜体 | `**bold**` / `*italic*` |
| 列表 | 有序列表、无序列表 |
| 链接/图片 | `[text](url)` / `![alt](url)` |
| 引用 | `> blockquote` |
| 代码块 | \`\`\`language ... \`\`\` |
| 行内代码 | \`code\` |
| 表格 | 标准 Markdown 表格语法 |
| 分割线 | `---` |

#### 2.3.3 代码高亮
- 代码块支持语法高亮
- 自动识别语言类型（需在代码块头声明语言）
- 支持常见编程语言：JavaScript、TypeScript、Python、Java、Go、HTML、CSS、JSON、YAML、Shell 等

### 2.4 数据持久化

- 使用浏览器 LocalStorage 存储数据
- 数据结构以 JSON 格式存储
- 自动保存，无需手动触发

---

## 3. 非功能需求

### 3.1 性能
- 首次加载时间 < 2 秒
- Markdown 渲染延迟 < 100ms
- 自动保存防抖间隔 500ms

### 3.2 兼容性
- 支持 Chrome、Firefox、Edge、Safari 最新版本
- 响应式布局，最小支持宽度 768px

### 3.3 可用性
- 空状态提供引导提示
- 操作反馈及时（保存成功、删除确认等）
- 键盘快捷键支持（可选）

---

## 4. 数据模型

```typescript
interface Note {
  id: string;          // 唯一标识，UUID
  title: string;       // 笔记标题
  content: string;     // Markdown 原始内容
  createdAt: number;   // 创建时间戳
  updatedAt: number;   // 最后更新时间戳
}
```

LocalStorage Key：`markdown-notes-app`

存储格式：
```json
{
  "notes": [
    {
      "id": "uuid-xxx",
      "title": "示例笔记",
      "content": "# Hello\n这是示例内容",
      "createdAt": 1708761600000,
      "updatedAt": 1708761600000
    }
  ]
}
```

---

## 5. 界面原型描述

```
┌─────────────────────────────────────────────────────────────┐
│                        Header（标题栏）                       │
├──────────────┬──────────────────────┬────────────────────────┤
│  笔记列表面板  │    Markdown 编辑器    │     实时预览面板        │
│              │                      │                        │
│ [🔍 搜索...]  │  # 标题输入框         │     渲染后的 HTML       │
│              │                      │                        │
│ ▸ 笔记 1     │  Markdown 内容        │     样式化内容展示      │
│ ▸ 笔记 2     │  编辑区域             │     代码块高亮          │
│ ▸ 笔记 3     │                      │                        │
│              │                      │                        │
│ [+ 新建笔记]  │                      │                        │
├──────────────┴──────────────────────┴────────────────────────┤
│                        Footer（可选）                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. 里程碑规划

| 阶段 | 内容 | 预计耗时 |
|------|------|----------|
| **M1 - 基础框架** | 项目初始化、技术栈搭建、基础布局 | 0.5 天 |
| **M2 - 核心功能** | 笔记 CRUD、LocalStorage 持久化 | 1 天 |
| **M3 - 编辑预览** | Markdown 编辑器、实时预览、代码高亮 | 1 天 |
| **M4 - 搜索与优化** | 搜索功能、UI 打磨、响应式适配 | 0.5 天 |

---

## 7. 风险与应对

| 风险 | 影响 | 应对策略 |
|------|------|----------|
| LocalStorage 容量限制（约 5MB） | 笔记数量受限 | 提示用户存储空间使用情况，后续可扩展 IndexedDB |
| 浏览器清除数据导致笔记丢失 | 数据丢失 | 提供导出/导入功能（V2 扩展） |
| 大量笔记时搜索性能 | 搜索变慢 | 采用防抖策略，必要时优化搜索算法 |
